(()=>{"use strict";function e(e,t,r,n){var o=document.querySelector("#card-template").content.querySelector(".card").cloneNode(!0),c=o.querySelector(".card__image"),a=o.querySelector(".card__title"),i=o.querySelector(".card__delete-button"),s=o.querySelector(".card__like-button"),u=e.name,l=e.link;return c.src=l,c.alt=u,a.textContent=u,i.addEventListener("click",t),s.addEventListener("click",r),c.addEventListener("click",(function(){return n(u,l)})),o}var t=function(e){e.target===e.currentTarget&&e.currentTarget.closest(".card").remove()},r=function(e){e.target===e.currentTarget&&e.currentTarget.classList.toggle("card__like-button_is-active")},n=function(e){e.classList.add("popup_is-opened"),e.addEventListener("click",c),document.addEventListener("keydown",a)},o=function(e){e.classList.remove("popup_is-opened"),e.removeEventListener("click",c),document.removeEventListener("keydown",a)};function c(e){e.target===e.currentTarget&&o(e.currentTarget)}function a(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");t&&o(t)}}function i(e,t,r){Array.from(e).some((function(e){return!e.validity.valid}))?(t.classList.add(r),t.disabled=!0):(t.classList.remove(r),t.disabled=!1)}function s(e,t){var r=e.querySelectorAll(t.inputSelector),n=e.querySelector(t.submitButtonSelector);r.forEach((function(r){var n=e.querySelector(".".concat(r.id,"-error"));r.setCustomValidity(""),r.classList.remove(t.inputErrorClass),n&&(n.textContent="",n.classList.remove(t.errorClass))})),n.classList.add(t.inactiveButtonClass),n.disabled=!0}var u,l=document.querySelector(".places__list"),p=document.querySelector(".profile"),d=p.querySelector(".profile__title"),_=p.querySelector(".profile__description"),m=p.querySelector(".profile__edit-button"),v=p.querySelector(".profile__add-button"),y=document.querySelector(".popup_type_edit"),f=document.querySelector(".popup_type_new-card"),S=document.querySelector(".popup_type_image"),q=S.querySelector(".popup__image"),k=S.querySelector(".popup__caption"),C=document.querySelectorAll(".popup"),L=document.querySelectorAll(".popup__close"),g=document.forms["edit-profile"],E=g.querySelector(".popup__input_type_name"),b=g.querySelector(".popup__input_type_description"),h=document.forms["new-place"],x=h.querySelector(".popup__input_type_card-name"),B=h.querySelector(".popup__input_type_url"),V={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};function j(e,t){n(S),q.alt=e,k.textContent=e,q.src=t}u=V,document.querySelectorAll(u.formSelector).forEach((function(e){var t=e.querySelectorAll(u.inputSelector),r=e.querySelector(u.submitButtonSelector);t.forEach((function(n){n.addEventListener("input",(function(){!function(e,t,r,n){var o=e.querySelector(".".concat(t.id,"-error")),c=t.dataset.errorMessage;t.pattern&&""!==t.value&&(new RegExp(t.pattern).test(t.value)?t.setCustomValidity(""):t.setCustomValidity(c)),t.validity.patternMismatch?t.setCustomValidity(c):t.setCustomValidity(""),"url"!==t.type||t.validity.valid||(t.validity.typeMismatch?t.setCustomValidity("Введите адрес сайта"):t.setCustomValidity("")),t.validity.valid?(t.classList.remove(r),o.classList.remove(n),o.textContent=""):(t.classList.add(r),o.classList.add(n),o.textContent=t.validationMessage)}(e,n,u.inputErrorClass,u.errorClass),i(t,r,u.inactiveButtonClass)}))})),i(t,r,u.inactiveButtonClass)})),m.addEventListener("click",(function(){E.value=d.textContent,b.value=_.textContent,n(y),s(g,V)})),v.addEventListener("click",(function(){x.value="",B.value="",n(f),s(h,V)})),g.addEventListener("submit",(function(e){e.preventDefault(),d.textContent=E.value,_.textContent=b.value,o(y)})),h.addEventListener("submit",(function(n){n.preventDefault();var c={name:"".concat(x.value),link:"".concat(B.value)};l.prepend(e(c,t,r,j)),h.reset(),o(f)})),L.forEach((function(e){var t=e.closest(".popup");e.addEventListener("click",(function(){return o(t)}))})),C.forEach((function(e){return e.classList.add("popup_is-animated")})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(n){return l.append(e(n,t,r,j))}))})();
//# sourceMappingURL=main.js.map